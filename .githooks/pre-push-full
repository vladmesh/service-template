#!/usr/bin/env bash
# Pre-push hook for service-template FRAMEWORK repository
# Full version - runs ALL checks unconditionally
# Use this before releases or when you want complete verification
set -euo pipefail

remote_name="${1-}"
remote_url="${2-}"

REPO_ROOT="$(git rev-parse --show-toplevel)"
cd "${REPO_ROOT}"

echo "[pre-push-full] Running FULL verification for ${remote_name:-unknown}..."

export DOCKER_BUILDKIT=1

echo ""
echo "[pre-push-full] Checking framework synchronization..."
make check-sync

echo ""
echo "[pre-push-full] Running linters..."
make lint

echo ""
echo "[pre-push-full] Running framework tests..."
make test

echo ""
echo "[pre-push-full] Running copier tests..."
make test-copier

echo ""
echo "[pre-push-full] âœ… All checks passed!"
